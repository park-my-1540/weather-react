(this.webpackJsonpweather_react=this.webpackJsonpweather_react||[]).push([[0],{34:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var a=n(7),c=n.n(a),r=n(2),s=n.n(r),i=(n(34),n(6)),l=n(1),o={lat:37,lng:127,flag:"initState",city:"where"};function u(e,t){switch(t.type){case"CHANGE":return{lat:t.lat,lng:t.lng,flag:"change"};case"INIT":return{lat:t.lat,lng:t.lng,flag:"init"};default:return e}}var d=Object(r.createContext)(),j=Object(r.createContext)();function b(e){var t=e.children,n=Object(r.useReducer)(u,o),a=Object(i.a)(n,2),c=a[0],s=a[1];return Object(l.jsx)(d.Provider,{value:c,children:Object(l.jsx)(j.Provider,{value:s,children:t})})}function h(){return Object(r.useContext)(d)}function p(){return Object(r.useContext)(j)}var m=n(19),O=n(5),x=n.n(O),f=n(10),g=n(14),v=n.n(g);function y(e,t){switch(t.type){case"LOADING":return{loading:!0,data:null,error:null};case"SUCCESS":return{lading:!1,data:t.data,error:null};case"ERROR":return{loading:!1,data:null,error:t.error};default:throw new Error("error \uc218\uace0")}}var w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object(r.useReducer)(y,{loading:!1,data:null,error:!1}),a=Object(i.a)(n,2),c=a[0],s=a[1],l=function(){var t=Object(f.a)(x.a.mark((function t(){var n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s({type:"LOADING"}),t.prev=1,t.next=4,e();case 4:n=t.sent,s({type:"SUCCESS",data:n}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),s({type:"ERROR",error:t.t0});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){l()}),t),[c,l]},N=n(8);function C(e){var t=e.mainData,n=new Date,a=n.getFullYear(),c=n.getMonth()+1,r=n.getDate(),s=["Sunday","Monday","Tuesday","Wensday","Thursday","Friday","Saturday"][n.getDay()],i=["Jan","Feb","Mar","Apr","May","Jun","July","Aug","Sept","Nov","Dec"][c-1];return Object(l.jsx)("div",{className:"Main_Box",children:Object(l.jsxs)("div",{className:"inner",children:[Object(l.jsxs)("div",{className:"title_wrap",children:[Object(l.jsx)("p",{className:"dayWeek",children:s}),Object(l.jsxs)("div",{className:"day",children:[Object(l.jsxs)("p",{children:[r," ",i," ",a]}),Object(l.jsxs)("p",{children:[Object(l.jsx)(N.c,{}),Object(l.jsx)("span",{children:t.state}),Object(l.jsxs)("span",{children:[", ",t.country]})]})]})]}),Object(l.jsxs)("div",{className:"content_wrap",children:["Sunny"===t.main&&Object(l.jsx)(N.d,{}),"Clear"===t.main&&Object(l.jsx)(N.a,{}),"Rain"===t.main&&Object(l.jsx)(N.b,{}),Object(l.jsxs)("p",{className:"main_temp",children:[t.temp,"\xb0C"]}),Object(l.jsx)("p",{className:"main_desc",children:t.main})]})]})})}function M(e){var t=e.mainData,n=e.setModal;return Object(l.jsxs)("div",{className:"Sub_Box",children:[Object(l.jsxs)("div",{className:"sub_desc_box",children:[Object(l.jsxs)("dl",{children:[Object(l.jsx)("dt",{children:"DESCRIPTION"}),Object(l.jsx)("dd",{children:t.desc})]}),Object(l.jsxs)("dl",{children:[Object(l.jsx)("dt",{children:"HUMIDITY"}),Object(l.jsxs)("dd",{children:[t.humidity," %"]})]}),Object(l.jsxs)("dl",{children:[Object(l.jsx)("dt",{children:"WIND"}),Object(l.jsxs)("dd",{children:[t.wind," km/h"]})]})]}),Object(l.jsx)("div",{className:"weather_list_wrap",children:Object(l.jsx)("ul",{children:t.forecast.map((function(e,t){return Object(l.jsxs)("li",{children:["Sunny"===e.main&&Object(l.jsx)(N.d,{}),"Clear"===e.main&&Object(l.jsx)(N.a,{}),"Clouds"===e.main&&Object(l.jsx)(N.a,{}),"Rain"===e.main&&Object(l.jsx)(N.e,{}),Object(l.jsx)("p",{className:"",children:e.main}),Object(l.jsx)("p",{className:"",children:e.temp}),Object(l.jsxs)("p",{className:"",children:[e.max," / ",e.min]})]},t)}))})}),Object(l.jsxs)("button",{type:"button",className:"btn",onClick:function(){return n("open")},children:[Object(l.jsx)(N.c,{className:"test"}),"Change location"]})]})}var I=n(29),S=n(12),k=n.n(S),_=(n(58),n(11)),R=function(e){var t=e.name,n=e.scope;return Object(l.jsx)("div",{className:"marker",style:{cursor:"pointer"},title:t,children:"current"===n?Object(l.jsx)(_.c,{value:t}):Object(l.jsx)(_.a,{value:t})})},A=s.a.memo(R);function D(e){var t=e.refetch,n=p(),a=h(),c=Object(r.useState)(a),s=Object(i.a)(c,2),o=s[0],u=s[1],d=Object(r.useState)(o),j=Object(i.a)(d,2),b=j[0],m=j[1];function O(){return(O=Object(f.a)(x.a.mark((function e(a){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,n({type:"CHANGE",lat:b.lat,lng:b.lng,flag:"change"});case 3:t();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(l.jsxs)("div",{style:{height:"100%",width:"100%"},children:[Object(l.jsxs)(I.a,{center:o,defaultZoom:11,yesIWantToUseGoogleMapApiInternals:!0,onClick:function(e){m({lat:e.lat,lng:e.lng})},onGoogleApiLoaded:function(e){var t,n=e.map;e.maps;return(t=n).map,t.maps,void navigator.geolocation.getCurrentPosition((function(e){u({lat:e.coords.latitude,lng:e.coords.longitude})}),(function(){}))},bootstrapURLKeys:{key:"AIzaSyAtpI23q-I9qXLrdfPVk7O2wCTlWHWaseo"},children:[Object(l.jsx)(A,{lat:o.lat,lng:o.lng,scope:"current"}),[{id:1,name:"seoul",pos:{lat:37.55138986009033,lng:126.98588446406256}},{id:2,name:"jeonju",pos:{lat:35.82163848334147,lng:127.10523012135582}},{id:3,name:"busan",pos:{lat:35.16419348131997,lng:129.04981019948082}},{id:4,name:"gwangju",pos:{lat:35.12929531292171,lng:126.83248992982925}}].map((function(e){return Object(l.jsx)(A,{lat:e.pos.lat,lng:e.pos.lng,name:e.name,scope:"sub"})}))]}),Object(l.jsxs)("div",{className:"cont",children:[b&&Object(l.jsxs)("span",{children:["\ud574\ub2f9 \uc704\uce58 \uc870\ud68c",Object(l.jsx)("br",{}),": ",b.lat,", ",b.lng]}),Object(l.jsxs)("button",{type:"button",onClick:function(e){return function(e){return O.apply(this,arguments)}(e)},children:["\uc120\ud0dd\ud55c \uc704\uce58\ub85c \ubcc0\uacbd",Object(l.jsx)(_.d,{})]})]})]})}function E(e){e.show;var t=e.setModal,n=e.refetch;return Object(l.jsx)(s.a.Fragment,{children:Object(l.jsx)("div",{className:"popup_container",children:Object(l.jsxs)("div",{className:"popup_inner",children:[Object(l.jsx)("a",{href:"#none",className:"close",onClick:function(){return t("close")},children:Object(l.jsx)(_.b,{})}),Object(l.jsx)("div",{className:"pop_cont",children:Object(l.jsx)("div",{style:{height:500},children:Object(l.jsx)(D,{refetch:n})})})]})})})}function L(e){var t=e.data,n=e.refetch,a=Object(r.useState)("close"),c=Object(i.a)(a,2),s=c[0],o=c[1];return Object(l.jsxs)("div",{className:"container",children:[Object(l.jsx)(C,{mainData:t}),Object(l.jsx)(M,{mainData:t,modal:s,setModal:o}),"open"===s&&Object(l.jsx)(E,{modal:s,setModal:o,refetch:n})]})}n(59);var P=function(){return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("div",{class:"container",children:Object(l.jsxs)("div",{class:"loader",children:[Object(l.jsx)("div",{class:"loader--dot"}),Object(l.jsx)("div",{class:"loader--dot"}),Object(l.jsx)("div",{class:"loader--dot"}),Object(l.jsx)("div",{class:"loader--dot"}),Object(l.jsx)("div",{class:"loader--dot"}),Object(l.jsx)("div",{class:"loader--dot"}),Object(l.jsx)("div",{class:"loader--text"})]})})})},T=s.a.memo(P);function W(){var e="ffc012cd698a9beca9d896a3efcc1576",t=h(),n=p(),a=Object(r.useRef)(t.lat),c=Object(r.useRef)(t.lng),s=Object(r.useRef)(t.flag),o=(t.lat,t.lng,t.flag,function(){var e=Object(f.a)(x.a.mark((function e(){var t,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:t=e.sent,a=t.coords,n({type:"INIT",lat:a.latitude,lng:a.longitude});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());Object(r.useEffect)((function(){o()}),[]);var u=[],d=[];function j(){return Math.max.apply(Math,Object(m.a)(u))}function b(){return Math.min.apply(Math,Object(m.a)(d))}var O=[],g=[],y={min:[],max:[]};function N(){return new Promise((function(e,t){return navigator.geolocation.getCurrentPosition(e,t)}))}function C(e,t){return new Promise((function(n,a){k.a.setApiKey("AIzaSyAtpI23q-I9qXLrdfPVk7O2wCTlWHWaseo"),k.a.setLanguage("en"),k.a.setRegion("en"),k.a.enableDebug(),k.a.fromLatLng(e,t).then((function(e){var t=e.results[0].formatted_address.split(","),a=t[t.length-3]+" , "+t[t.length-2];return n(a),a}))}))}Object(r.useEffect)((function(){a.current=t.lat,c.current=t.lng,s.current=t.flag}),[t]);var M=w(function(){var t=Object(f.a)(x.a.mark((function t(){var n,r,i,l,o,h,p,m;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=-1,t.next=4,N();case 4:return r=t.sent,i=r.coords,l="change"===s.current?a.current:i.latitude,o="change"===s.current?c.current:i.longitude,t.next=10,C(l,o);case 10:return h=t.sent,O=[],g=[],p="https://api.openweathermap.org/data/2.5/weather?lat=".concat(l,"&lon=").concat(o,"&exclude=daily&appid=").concat(e,"&units=metric"),m="https://api.openweathermap.org/data/2.5/forecast?lat=".concat(l,"&lon=").concat(o,"&exclude=daily&appid=").concat(e,"&cnt=20&units=metric"),t.next=17,v.a.all([v.a.get(p),v.a.get(m)]).then(v.a.spread((function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var c=t[0].data,r=t[1].data.list;r.forEach((function(e,t){u.push(Math.round(e.main.temp_max)),d.push(Math.round(e.main.temp_min)),t%4===0&&(n++,y.min.push(b()),y.max.push(j()),d=[],u=[],g.push({main:e.weather[0].main,temp:Math.round(e.main.temp),max:Math.round(y.max[n]),min:Math.round(y.min[n])}))})),O.push({temp:Math.round(c.main.temp),name:c.name,main:c.weather[0].main,country:c.sys.country,wind:c.wind.speed,humidity:c.main.humidity,desc:c.weather[0].description,forecast:g,state:h})})));case 17:t.next=22;break;case 19:t.prev=19,t.t0=t.catch(0),console.log("Error: "+t.t0.message);case 22:return t.abrupt("return",O);case 23:case"end":return t.stop()}}),t,null,[[0,19]])})));return function(){return t.apply(this,arguments)}}(),[]),I=Object(i.a)(M,2),S=I[0],_=I[1],R=S.loading,A=S.data,D=S.error;return R?Object(l.jsx)(T,{}):D?Object(l.jsx)("div",{children:"\uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4"}):A?A.map((function(e,t){return Object(l.jsx)(L,{data:e,refetch:_},t)})):null}var F=s.a.memo(W);function G(){return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)(b,{children:Object(l.jsx)("div",{className:"App",children:Object(l.jsx)(F,{})})})})}var H=document.getElementById("root");c.a.render(Object(l.jsx)(G,{}),H)}},[[60,1,2]]]);
//# sourceMappingURL=main.ea4deb5c.chunk.js.map